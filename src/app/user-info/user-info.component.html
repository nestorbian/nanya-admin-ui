<div class="content">
  <!-- 错误信息提示框 -->
  <div class="tip-postion" *ngIf="isShowErrorTip">
      <div class="alert alert-danger">
        <span class="glyphicon glyphicon-info-sign"></span>
        <div class="w10"></div>{{errorMessage}}
    </div>
  </div>

  <!-- 成功信息提示框 -->
  <div class="tip-postion" *ngIf="isShowSuccessTip">
      <div class="alert alert-success">
        <span class="glyphicon glyphicon-ok"></span>
        <div class="w10"></div>{{successMessage}}
    </div>
  </div>
  <div class="h90"></div>
  <div class="container">
    <div class="row">
        <div class="col-md-8 col-md-offset-2">
          <div class="setting-profile-title yahei">头像设置</div>
        </div>
    </div>
    <div class="row">
      <div class="col-md-8 col-md-offset-2" style="border-bottom: 1px solid #e5e5e5;border-top: 1px solid #e5e5e5;">
        <div class="col-md-8" style="border-right: 1px solid #e5e5e5;padding-bottom: 20px;">
          <p>方法一：选择本地照片，上传自己的头像</p>
          <a class="btn btn-primary image-upload" *ngIf="!isCompleteUpload">
            <span class="fa fa-plus"></span><span class="upload-span">选择图片</span>
            <input type="file" accept="image/*" class="image-input" (change)="onImageUpload($event)" name="imageFile"/>
          </a>
          <i class="fa fa-spinner fa-pulse" style="font-size: 24px;" *ngIf="isCompleteUpload"></i>
          <p style="margin-top: 10px;">方法二：选择推荐头像，快速上传优质头像</p>
          <ul class="recommend-ul clearfix">
            <li *ngFor="let recommendImag of recommendImagerray;let i = index">
              <img [src]="recommendImag" width="50" height="50" (click)="recommendIndex = i"/>
              <span class="recommendSpan" *ngIf="recommendIndex === i"></span>
            </li>
          </ul>
          <button class="btn btn-primary image-upload" (click)="saveHeadSculpture()">
            <span class="fa fa-check"></span><span class="upload-span">保存头像</span>
          </button>
        </div>
        <div class="col-md-4 preview" *ngIf="user && user.headSculptureUrl">
          <p class="pass-portrain-commonp yahei">原头像预览</p>
          <div class="head-sculpture head-100" [style.background-image]="'url(' + user?.headSculptureUrl + ')'"></div>
          <p class="pass-portrain-commonp yahei" style="font-size: 12px">大头像100*100</p>
          <div class="head-sculpture head-50" [style.background-image]="'url(' + user?.headSculptureUrl + ')'"></div>
          <p class="pass-portrain-commonp yahei" style="font-size: 12px">小头像50*50</p>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-8 col-md-offset-2">
          <div class="setting-profile-title yahei">基本资料设置</div>
          <div class="col-md-8 col-md-offset-2">
          <form class="form-horizontal" #userForm="ngForm" (ngSubmit)="submit()" *ngIf="user">
            <div class="form-group">
              <label for="userName"  class="col-md-3 control-label">用户名<span class="red">*</span>:</label>
              <div class="col-md-9">
                <input type="text" class="form-control" name="userName" [(ngModel)]="user.userName" required #userName="ngModel" 
                [class.red-border]="userName.touched && userName.invalid" id="userName" placeholder="限30个字符" maxlength="25"/>
              </div>
            </div>
            <div class="form-group">
              <label for="sex"  class="col-md-3 control-label">性别<span class="red">*</span>:</label>
              <div class="col-md-9">
                <select [(ngModel)]="user.sex" name="sex" #sex="ngModel" required style="height: 34px;">
                  <option value="男">男</option>
                  <option value="女">女</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label for="phone" class="col-md-3 control-label">手机号<span class="red">*</span>:</label>
              <div class="col-md-9">
                <input type="tel" class="form-control" id="phone" name="phone" [(ngModel)]="user.phone" #phone="ngModel"
                placeholder="建议使用常用手机" maxlength="11"  required [class.red-border]="phone.touched && phone.invalid"
                (keypress)="removeChar($event)" onpaste="return false" ondragenter="return false" 
                onkeyup="this.value=this.value.replace(/[^\d]/g,'')"/>
              </div>
            </div>
            <div class="form-group" *ngIf="false">
              <label for="phoneValidateNumber" class="col-md-3 control-label">验证码<span class="red">*</span>:</label>
              <div class="col-md-5 validate-number">
                <input type="text" class="form-control number-input" id="phoneValidateNumber" name="phoneValidateNumber" [(ngModel)]="phoneValidateNumber" required
                placeholder="请输入手机验证码" maxlength="6" #localPhoneValidateNumber="ngModel" [class.red-border]="localPhoneValidateNumber.touched && localPhoneValidateNumber.invalid"/>
              </div>
              <div class="col-md-4 validate-button">
                <a class="btn btn-info" (click)="countDown($event)" style="width: 100%;">获取验证码</a>
              </div>
            </div>
            <div class="form-group">
              <label for="profile"  class="col-md-3 control-label">简介<span class="red">*</span>:</label>
              <div class="col-md-9">
                <textarea type="text" class="form-control rs" name="profile" [(ngModel)]="user.profile" required #profile="ngModel" 
                [class.red-border]="profile.touched && profile.invalid" id="profile" placeholder="限300个字符" maxlength="300" rows="5">
                </textarea>
              </div>
            </div>
            <div class="form-group text-center">
              <button type="submit" class="btn btn-primary image-upload" [disabled]="!userForm.form.valid"><span class="fa fa-check"></span><span class="upload-span">保存修改</span></button>
            </div>
          </form>
          </div>
      </div>
    </div>
  </div>
  <app-footer></app-footer>
</div>
